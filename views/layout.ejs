<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="description" content="Sistema de Gestão das Peladas das Quintas Feiras">
  <meta name="theme-color" content="#2c3e50">  <title><%= typeof title !== 'undefined' ? title : 'Peladas das Quintas Feiras' %></title>
  <link rel="stylesheet" href="/style.css?v=<%= Date.now() %>">
  <link rel="stylesheet" href="/mobile.css?v=<%= Date.now() %>">
  <link rel="stylesheet" href="/mobile-fix.css?v=<%= Date.now() %>">
  <link rel="stylesheet" href="/share-button.css?v=<%= Date.now() %>">
  <link rel="icon" type="image/svg+xml" href="/logo.svg">
  <link rel="shortcut icon" href="/logo.svg">
  
  <!-- CRITICAL MOBILE OVERRIDES (inline) -->
  <style>
    @media (max-width: 768px) {
      body { padding-top: 65px !important; }
      header.header { position: fixed !important; top: 0 !important; left: 0 !important; right: 0 !important; height: 60px !important; background: #2c3e50 !important; z-index: 999 !important; }
      #mobileMenuToggle { display: flex !important; z-index: 1002 !important; }
      #navbarMenu { position: fixed !important; top: 0 !important; left: -100% !important; height: 100vh !important; z-index: 1001 !important; padding-top: 60px !important; }
      #navbarMenu.active { left: 0 !important; }
      #mobileMenuOverlay { display: none; }
      #mobileMenuOverlay.active { display: block !important; position: fixed !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; background: rgba(0,0,0,0.6) !important; z-index: 1000 !important; }
    }
  </style>
  
  <!-- Force mobile mode on real touch devices or narrow screens -->
  <script>
    (function(){
      try {
        var isCoarse = window.matchMedia && window.matchMedia('(pointer: coarse)').matches;
        var isTouch = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
        var narrow = window.innerWidth <= 900; // a bit higher to be safe
        if (isCoarse || isTouch || narrow) {
          document.documentElement.classList.add('mobile-real');
        }
      } catch (e) {}
    })();
  </script>
</head>
<body class="main-bg">
  <%- include('partials/header') %>
    <main class="container">
    <%- body %>
  </main>
  
  <script>
    // Helper: scroll to top on page load
    (function(){
      try { window.scrollTo(0,0); } catch(e){}
    })();
  </script>
  
  <!-- Botão de partilha -->
  <script src="/share-button.js?v=<%= Date.now() %>"></script>
</body>
</html>