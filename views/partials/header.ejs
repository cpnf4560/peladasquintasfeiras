<header class="header">
  <a href="/jogos" class="logo-area logo-link">
    <img src="/logo.svg" alt="Logo" class="logo-image logo-spin">
    <span class="logo-text">Peladas das<br>Quintas Feiras</span>
  </a>

  <!-- Menu Hamburger (Mobile) -->
  <button class="mobile-menu-toggle" id="mobileMenuToggle" style="display: none;">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <nav class="navbar" id="navbarMenu">
    <ul>
      <li><a href="/convocatoria" class="nav-link <%= typeof activePage !== 'undefined' && activePage === 'convocatoria' ? 'active' : '' %>">âš½ ConvocatÃ³ria</a></li>
      <li><a href="/coletes" class="nav-link <%= typeof activePage !== 'undefined' && activePage === 'coletes' ? 'active' : '' %>">ğŸ‘• Coletes</a></li>
      <li><a href="/jogos" class="nav-link <%= typeof activePage !== 'undefined' && activePage === 'resultados' ? 'active' : '' %>">ğŸ† Resultados</a></li>
      <li><a href="/estatisticas" class="nav-link <%= typeof activePage !== 'undefined' && activePage === 'estatisticas' ? 'active' : '' %>">ğŸ“Š EstatÃ­sticas</a></li>
      <li><a href="/comparacao" class="nav-link <%= typeof activePage !== 'undefined' && activePage === 'comparacao' ? 'active' : '' %>">âš–ï¸ ComparaÃ§Ã£o</a></li>
      
      <% if (typeof user !== 'undefined' && user && user.role === 'admin') { %>
        <li><a href="/jogos/novo" class="nav-link <%= typeof activePage !== 'undefined' && activePage === 'novo-jogo' ? 'active' : '' %>">ğŸ“ Registar Resultado</a></li>
        <li><a href="/admin/dashboard" class="nav-link <%= typeof activePage !== 'undefined' && activePage === 'admin' ? 'active' : '' %>">ğŸ”§ Admin</a></li>
      <% } %>

      <!-- User info no menu mobile -->
      <li class="show-mobile" style="display: none; border-top: 2px solid rgba(255,255,255,0.2); margin-top: 12px; padding-top: 12px;">
        <% if (typeof user !== 'undefined' && user) { %>
          <div style="padding: 12px 24px; color: #ecf0f1;">
            <div style="margin-bottom: 8px;">ğŸ‘¤ <strong><%= user.username %></strong></div>
            <% if (user.role === 'admin') { %>
              <div style="font-size: 12px; color: #3498db;">ğŸ”‘ Administrador</div>
            <% } %>
          </div>
          <form method="POST" action="/logout">
            <button type="submit" class="nav-link" style="width: 100%; text-align: left; background: #e74c3c; color: white;">ğŸšª Logout</button>
          </form>
        <% } else { %>
          <a href="/login" class="nav-link" style="background: #27ae60; color: white;">ğŸ”‘ Login Admin</a>
        <% } %>
      </li>
    </ul>
  </nav>

  <!-- User info desktop -->
  <% if (typeof user !== 'undefined' && user) { %>
    <div class="user-info hide-mobile">
      <span class="username">ğŸ‘¤ <%= user.username %></span>
      <% if (user.role === 'admin') { %>
        <span class="user-role">Admin</span>
      <% } else { %>
        <a href="/dashboard" class="dashboard-link">ğŸ“Š Dashboard</a>
      <% } %>
      <form method="POST" action="/logout" style="display: inline;">
        <button type="submit" class="logout-btn">ğŸšª Logout</button>
      </form>
    </div>
  <% } else { %>
    <div class="user-info hide-mobile">
      <a href="/login" class="login-btn">ğŸ”‘ Login Admin</a>
    </div>
  <% } %>
</header>

<!-- Overlay para fechar menu -->
<div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>

<!-- Script para menu mobile -->
<script>
(function() {
  const toggle = document.getElementById('mobileMenuToggle');
  const menu = document.getElementById('navbarMenu');
  const overlay = document.getElementById('mobileMenuOverlay');
  
  if (!toggle || !menu || !overlay) return;

  function toggleMenu() {
    toggle.classList.toggle('active');
    menu.classList.toggle('active');
    overlay.classList.toggle('active');
    document.body.style.overflow = menu.classList.contains('active') ? 'hidden' : '';
  }

  function closeMenu() {
    toggle.classList.remove('active');
    menu.classList.remove('active');
    overlay.classList.remove('active');
    document.body.style.overflow = '';
  }

  toggle.addEventListener('click', toggleMenu);
  overlay.addEventListener('click', closeMenu);

  // Fechar ao clicar em link
  const navLinks = menu.querySelectorAll('.nav-link');
  navLinks.forEach(link => {
    link.addEventListener('click', closeMenu);
  });

  // Fechar ao redimensionar (evitar bugs)
  let resizeTimer;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
      if (window.innerWidth > 768) {
        closeMenu();
      }
    }, 250);
  });
})();
</script>
