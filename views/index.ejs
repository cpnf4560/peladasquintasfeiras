<!DOCTYPE html>
<html>
<head>
  <title>Peladas das Quintas Feiras</title>
  <link rel="stylesheet" href="/style.base.css">
  <link rel="stylesheet" href="/style.layout.css">
  <link rel="stylesheet" href="/style.tables.css">
  <link rel="stylesheet" href="/style.cards.css">
  <link rel="stylesheet" href="/style.forms.css">
  <link rel="stylesheet" href="/style.css?v=<%= Date.now() %>">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
</head>
<body class="main-bg">
  <%- include('partials/header', { user: user }) %>

  <main class="container">
    <h2 class="section-title">Hist√≥rico de Resultados</h2>
    <div class="games-grid">
      <% jogos.forEach(jogo => { %>
      <div class="game-card" data-game-id="<%= jogo.id %>">
        <div class="game-card-header">
          <div class="game-card-title">Resultado</div>
          <div class="game-card-meta">
            <div class="game-date"><%= new Date(jogo.data).toLocaleDateString('pt-PT') %></div>
            <form method="POST" action="/jogos/<%= jogo.id %>/delete" class="delete-form" onsubmit="return confirm('Tem certeza que deseja eliminar este jogo? Esta a√ß√£o n√£o pode ser desfeita.')">
              <button type="submit" class="btn-delete-game" title="Eliminar jogo">üóëÔ∏è</button>
            </form>
          </div>
        </div>

        <div class="game-card-body">
          <div class="team team-left">
            <div class="team-top">
              <h3 class="team-name">Equipa 1</h3>
              <div class="team-score"><%= jogo.equipa1_golos %></div>
            </div>
            <div class="player-names">
              <% if (jogo.jogadores_equipa1 && jogo.jogadores_equipa1.length > 0) { %>
                <% jogo.jogadores_equipa1.slice(0, 5).forEach((jogador) => { %>
                  <div class="player-name"><%= jogador.nome %></div>
                <% }) %>
                <% if (jogo.jogadores_equipa1.length > 5) { %>
                  <div class="player-more">+<%= jogo.jogadores_equipa1.length - 5 %> mais</div>
                <% } %>
              <% } else { %>
                <div class="player-name" style="color: #888; font-style: italic;">Sem jogadores registados</div>
              <% } %>
            </div>
          </div>

          <div class="score-separator">VS</div>

          <div class="team team-right">
            <div class="team-top">
              <h3 class="team-name">Equipa 2</h3>
              <div class="team-score"><%= jogo.equipa2_golos %></div>
            </div>
            <div class="player-names">
              <% if (jogo.jogadores_equipa2 && jogo.jogadores_equipa2.length > 0) { %>
                <% jogo.jogadores_equipa2.slice(0, 5).forEach((jogador) => { %>
                  <div class="player-name"><%= jogador.nome %></div>
                <% }) %>
                <% if (jogo.jogadores_equipa2.length > 5) { %>
                  <div class="player-more">+<%= jogo.jogadores_equipa2.length - 5 %> mais</div>
                <% } %>
              <% } else { %>
                <div class="player-name" style="color: #888; font-style: italic;">Sem jogadores registados</div>
              <% } %>
            </div>
          </div>
        </div>
      </div>
      <% }) %>
    </div>
  </main>

  <%- include('partials/footer') %>
</body>
</html>